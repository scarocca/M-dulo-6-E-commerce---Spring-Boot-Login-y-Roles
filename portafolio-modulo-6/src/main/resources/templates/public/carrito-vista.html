<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tu Selección de Amor | CitaIdeal.cl</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet" th:href="@{/assets/css/style.css}">
</head>
<body>

	<nav
		class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
		<div class="container">
			<a class="navbar-brand fw-bold" href="/productos"
				style="color: var(--deep-love);"> <i
				class="bi bi-heart-fill me-2"></i>CitaIdeal.cl
			</a>
			<div class="ms-auto">
				<a href="/productos"
					class="btn btn-outline-secondary btn-sm rounded-pill"> <i
					class="bi bi-arrow-left me-1"></i>Volver a Experiencias
				</a>
			</div>
		</div>
		<a href="/carrito/ver"
			class="btn btn-outline-primary position-relative"> <i
			class="bi bi-cart-fill"></i> <span
			class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
			th:text="${itemsCount}"> 0 </span>
		</a>
	</nav>

	<main class="container my-5">
		<div class="header-section text-center mb-5 reveal">
			<h2 class="display-5 fw-bold" style="color: var(--deep-love);">Tu
				Selección de Amor</h2>
			<div class="divider mx-auto"></div>
			<p class="text-muted mt-3 italic">Revisa los detalles de tu
				próxima aventura romántica</p>
		</div>

		<div th:if="${#lists.isEmpty(carrito)}" class="text-center py-5">
			<div class="mb-4">
				<i class="bi bi-cart-x"
					style="font-size: 4rem; color: var(--romance-pink);"></i>
			</div>
			<h3>Aún no has elegido una experiencia</h3>
			<p class="text-muted">¡No dejes pasar la oportunidad de crear un
				recuerdo inolvidable!</p>
			<a href="/productos" class="btn btn-romance mt-3 px-5">Explorar
				Experiencias</a>
		</div>

		<div th:unless="${#lists.isEmpty(carrito)}"
			class="card cart-container shadow-sm p-4 border-0">
			<div class="table-responsive">
				<table class="table cart-table align-middle">
					<thead>
						<tr>
							<th>Experiencia Seleccionada</th>
							<th class="text-center">Precio Unitario</th>
							<th class="text-center">Personas/Cantidad</th>
							<th class="text-center">Subtotal</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="item : ${carrito}">
							<td>
								<div class="d-flex align-items-center">
									<div class="cart-img-wrapper">
										<img th:src="@{'/assets/img/' + ${item.plan.imagenUrl}}"
											class="cart-img" th:alt="${item.plan.nombre}">
									</div>
									<div class="ms-3">
										<h6 class="mb-0 fw-bold" th:text="${item.plan.nombre}">Nombre</h6>
										<small class="text-muted">Reserva inmediata</small>
									</div>
								</div>
							</td>
							<td class="text-center"><span
								th:text="'$' + ${#numbers.formatDecimal(item.plan.precioBase, 0, 'POINT', 0, 'COMMA')}"></span>
							</td>
							<td class="text-center">
								<div class="badge bg-light text-dark p-2 border">
									<span th:text="${item.cantidad}">1</span>
								</div>
							</td>
							<td class="text-center fw-bold text-dark"><span
								th:text="'$' + ${#numbers.formatDecimal(item.subtotal, 0, 'POINT', 0, 'COMMA')}"></span>
							</td>
							<td class="text-end"><a
								th:href="@{/carrito/eliminar/{id}(id=${item.plan.id})}"
								class="btn btn-delete" title="Quitar del carrito"> <i
									class="bi bi-trash3-fill"></i>
							</a></td>
						</tr>
					</tbody>
				</table>
			</div>

			<div class="row mt-5 align-items-end">
				<div class="col-md-6 mb-4 mb-md-0">
					<div class="p-3 bg-light rounded-4">
						<small class="fw-bold text-uppercase d-block mb-2">Información
							importante:</small>
						<p class="small text-muted mb-0">
							<i class="bi bi-info-circle me-1"></i> Todas las reservas están
							sujetas a confirmación de fecha disponibilidad.

						</p>
					</div>
				</div>
				<div class="col-md-6 text-md-end">
					<h5 class="cart-total-label mb-1">Total a Pagar:</h5>
					<div class="cart-total-amount mb-4"
						th:text="'$' + ${#numbers.formatDecimal(totalCarrito, 0, 'POINT', 0, 'COMMA')}">
						$0</div>
					<div class="d-grid d-md-block gap-2">

						<a href="/productos"
							class="btn btn-outline-secondary rounded-pill px-4 me-md-2">
							Añadir Más </a> <a href="/carrito/vaciar"
							class="btn btn-outline-danger rounded-pill px-4 me-md-2"
							onclick="return confirm('¿Estás seguro de que quieres quitar todos los planes de tu selección?')">
							<i class="bi bi-trash-fill me-1"></i>Vaciar Carrito
						</a> <a th:href="@{/carrito/checkout}"
							class="btn btn-romance btn-lg px-5 shadow"> Confirmar Reserva
							<i class="bi bi-arrow-right ms-2"></i>
						</a>
					</div>
				</div>
			</div>
		</div>
	</main>

	<footer class="py-4 mt-5 border-top bg-white">
		<div class="container text-center">
			<p class="text-muted small mb-0">
				&copy; 2026 CitaIdeal.cl - <i class="bi bi-heart-fill text-danger"></i>
				para momentos especiales
			</p>
		</div>
	</footer>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
	<script th:src="@{/assets/js/scroll-reveal.js}"></script>
</body>
</html>